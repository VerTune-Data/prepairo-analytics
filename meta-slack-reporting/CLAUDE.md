# Meta Slack Reporting - Project Context

This project provides Meta Ads reporting and analysis tools for product teams.

## Project Overview

**Purpose:** Automated Meta Ads performance reporting with AI-powered insights
**Target Users:** Product managers, data analysts, marketing ops
**Output:** Slack messages with formatted reports and charts

## Architecture

```
meta-slack-reporting/
├── skills/              # Three reporting skills (Claude Code compatible)
├── modules/             # Shared Python modules
├── logs/                # Execution logs
├── charts/              # Generated chart images
└── .env*                # Account-specific configurations
```

## Skills Available

1. **meta-ads-quick** - Fast daily snapshots (~30s)
2. **meta-ads-analyze** - Deep AI analysis with charts (~2-3min)
3. **meta-ads-audit** - Platform configuration checker (~10s)

## Tech Stack

- **Language:** Python 3.8+
- **APIs:** Meta Ads API (Facebook Marketing API)
- **AI:** Claude (Anthropic API) for analysis
- **Storage:** SQLite for historical data
- **Cloud:** AWS S3 for chart hosting
- **Notifications:** Slack webhooks

## Code Standards

### Python Style
- Use type hints for function parameters
- Docstrings for all public functions
- Keep functions under 50 lines
- Use descriptive variable names
- Follow PEP 8 conventions

### Error Handling
- Use `modules/error_handler.py` for user-friendly errors
- Always log errors with context
- Graceful degradation (continue if optional features fail)
- Never expose raw API errors to users

### Configuration
- Store secrets in `.env` files (never commit)
- Use `modules/config_loader.py` for loading config
- Provide `.env.example` templates
- Support multiple accounts (gre, upsc, test)

### Logging
- Log to `logs/skill_name_YYYYMMDD.log`
- Use INFO for normal operations
- Use WARNING for degraded functionality
- Use ERROR for failures

## Dependencies

Key packages (see `requirements.txt`):
- `facebook-business==19.0.0` - Meta Ads API
- `anthropic` - Claude API
- `boto3` - AWS S3
- `matplotlib` - Chart generation
- `requests` - HTTP requests
- `python-dotenv` - Environment variables

## Testing

Run skills without sending to Slack:
```bash
./test-without-slack.sh
```

Manual testing:
```bash
source venv/bin/activate
python3 skills/meta-ads-quick/tools/quick_report.py --help
```

## Conventions

### Naming
- Skills: Use gerund form (verb + -ing)
- Files: snake_case for Python, kebab-case for scripts
- Functions: snake_case
- Classes: PascalCase
- Constants: UPPER_SNAKE_CASE

### Git Commits
- Use descriptive commit messages
- Include "Co-Authored-By: Claude Sonnet 4.5" when appropriate
- Commit frequently with atomic changes

### Documentation
- Keep SKILL.md files under 500 lines
- Use markdown for all documentation
- Include examples for all features
- Update docs when changing behavior

## Multi-Account Support

Each account has its own `.env` file:
- `.env` → GRE account (default)
- `.env.upsc` → UPSC account
- `.env.test` → Test account

## Security

- Never commit `.env` files (in `.gitignore`)
- Rotate access tokens regularly
- Use read-only Meta API permissions when possible
- Store sensitive keys in AWS Secrets Manager (optional)

## Common Tasks

### Add New Account
1. Create `.env.new_account` file
2. Add account to argparse choices in skill tools
3. Test with `--account new_account`

### Add New Metric
1. Update `modules/meta_api.py` to fetch metric
2. Update chart generation if needed
3. Update Slack formatter for display
4. Test with all skills

### Debug API Issues
1. Check `logs/` directory for errors
2. Verify `.env` configuration
3. Test API access manually
4. Check Meta API changelog for breaking changes

## Performance Considerations

- Use platform filtering to reduce API calls
- Cache Meta API responses when appropriate
- Limit database queries
- Optimize chart generation
- Batch Slack messages

## Known Limitations

- First run has no historical comparison
- Platform changes take 15-30 minutes to propagate
- Charts require AWS S3 (gracefully skipped if unavailable)
- AI analysis requires Claude API key (gracefully skipped if unavailable)

## Support

- Technical docs: `skills/README.md`
- User guide: `FOR_PRODUCT_TEAM.md`
- Skill docs: `skills/*/SKILL.md`
- Logs: `logs/`


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>